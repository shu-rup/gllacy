ymaps.ready(function(){var a=new ymaps.Map("map",{center:[59.93918,30.327346],zoom:16},{searchControlProvider:"yandex#search"}),b=new ymaps.Placemark(a.getCenter(),{},{iconLayout:"default#image",iconImageHref:"img/map_pointer.png",iconImageSize:[218,142],iconImageOffset:[-240,-85]});a.geoObjects.add(b)});var link=document.querySelector(".feedback_btn"),popup=document.querySelector(".feedback"),close=popup.querySelector(".feedback_form_close"),form=popup.querySelector(".feedback_form"),overlay=document.querySelector(".feedback_overlay"),username=popup.querySelector("[name=feedback_name]"),usermail=popup.querySelector("[name=feedback_email]"),message=popup.querySelector("[name=feedback_text]"),storageName=localStorage.getItem("username"),storageMail=localStorage.getItem("usermail");link.addEventListener("click",function(a){a.preventDefault(),popup.classList.add("feedback_show"),overlay.classList.add("feedback_overlay_show"),(storageName||storageMail)&&(username.value=storageName,usermail.value=storageMail)}),close.addEventListener("click",function(a){a.preventDefault(),popup.classList.remove("feedback_show"),overlay.classList.remove("feedback_overlay_show"),popup.classList.remove("feedback_error")}),form.addEventListener("submit",function(a){username.value&&usermail.value&&message.value?(localStorage.setItem("username",username.value),localStorage.setItem("usermail",usermail.value)):(a.preventDefault(),popup.classList.remove("feedback_error"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("feedback_error"))}),window.addEventListener("keydown",function(a){27===a.keyCode&&(popup.classList.contains("feedback_show")||overlay.classList.contains("feedback_overlay_show"))&&(popup.classList.remove("feedback_show"),popup.classList.remove("feedback_error"),overlay.classList.remove("feedback_overlay_show"))});